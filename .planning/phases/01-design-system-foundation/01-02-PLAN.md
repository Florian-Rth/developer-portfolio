---
phase: 01-design-system-foundation
plan: 02
type: execute
wave: 2
depends_on: [01-01]
files_modified: [vite.config.ts]
autonomous: true

must_haves:
  truths:
    - "Vite loads Tailwind CSS v4 plugin as first plugin"
    - "Category-based path aliases are configured in Vite resolve.alias"
    - "Tailwind plugin is placed before React plugin (Pitfall 1 from RESEARCH.md)"
    - "Aliases include @, @components, @lib, @utils, @hooks, @features, @layouts, @types, @constants"
  artifacts:
    - path: "vite.config.ts"
      provides: "Vite configuration with Tailwind plugin and path aliases"
      contains: ["tailwindcss()", "resolve.alias", "@components", "@lib"]
  key_links:
    - from: "vite.config.ts"
      to: "@tailwindcss/vite package"
      via: "ES module import of tailwindcss plugin"
      pattern: "import.*tailwindcss.*from.*@tailwindcss/vite"
    - from: "vite.config.ts"
      to: "src/* directories"
      via: "path.resolve alias mapping"
      pattern: "@components.*path.resolve.*src/components"
---

<objective>
Configure Vite to use Tailwind CSS v4 plugin and category-based path aliases.

Purpose: Enable Tailwind CSS processing and allow clean imports using @components, @lib, etc. The Tailwind plugin MUST be first in the plugins array to avoid CSS processing issues (Pitfall 1 from RESEARCH.md).

Output: Updated vite.config.ts with tailwindcss() plugin first, followed by React plugin, and category-based path aliases in resolve.alias.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-design-system-foundation/01-CONTEXT.md
@.planning/phases/01-design-system-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Add Tailwind CSS v4 plugin to Vite</name>
  <files>vite.config.ts</files>
  <action>
    Edit vite.config.ts to:

    1. Add import for path module (if not present):
       `import path from "path";`

    2. Add import for Tailwind CSS plugin:
       `import tailwindcss from "@tailwindcss/vite";`

    3. Update plugins array to place tailwindcss() FIRST (critical - see Pitfall 1 in RESEARCH.md):
       ```typescript
       plugins: [
         tailwindcss(),  // MUST be first
         react({
           babel: {
             plugins: ["babel-plugin-react-compiler"],
           },
         }),
       ],
       ```

    CRITICAL: Tailwind plugin must come BEFORE react() plugin or CSS processing will fail.
  </action>
  <verify>grep -A5 "plugins:" vite.config.ts | head -6 | grep "tailwindcss()"</verify>
  <done>tailwindcss() is first plugin in vite.config.ts plugins array</done>
</task>

<task type="auto">
  <name>Add category-based path aliases to Vite</name>
  <files>vite.config.ts</files>
  <action>
    Add resolve.alias configuration to vite.config.ts with category-based aliases (user decision from CONTEXT.md):

    ```typescript
    resolve: {
      alias: {
        "@": path.resolve(__dirname, "./src"),
        "@components": path.resolve(__dirname, "./src/components"),
        "@lib": path.resolve(__dirname, "./src/lib"),
        "@utils": path.resolve(__dirname, "./src/utils"),
        "@hooks": path.resolve(__dirname, "./src/hooks"),
        "@features": path.resolve(__dirname, "./src/features"),
        "@layouts": path.resolve(__dirname, "./src/layouts"),
        "@types": path.resolve(__dirname, "./src/types"),
        "@constants": path.resolve(__dirname, "./src/constants"),
      },
    },
    ```

    Reference: RESEARCH.md > Pattern 3 for complete example.
  </action>
  <verify>grep -E "@components|@lib|@utils" vite.config.ts</verify>
  <done>All category-based aliases are configured in resolve.alias</done>
</task>

<task type="auto">
  <name>Update components.json aliases to match Vite</name>
  <files>components.json</files>
  <action>
    The shadcn CLI created @/ style aliases. Update components.json to use category-based aliases:

    Edit the aliases section to:
    ```json
    "aliases": {
      "components": "@components",
      "utils": "@lib/utils",
      "ui": "@components/ui",
      "lib": "@lib",
      "hooks": "@hooks"
    }
    ```

    This ensures `npx shadcn add` commands use the correct import paths.
  </action>
  <verify>grep -E '"components".*"@components"' components.json</verify>
  <done>components.json aliases use category-based format (@components, @lib, etc.)</done>
</task>

</tasks>

<verification>
After all tasks complete, verify Vite configuration:

1. Run `npm run build` - should succeed with new aliases
2. Run `npm run lint` - should pass
3. Check vite.config.ts has tailwindcss() as first plugin
4. Check vite.config.ts has all category-based aliases

If TypeScript errors about path aliases appear, they will be resolved in plan 01-03 when we configure tsconfig.
</verification>

<success_criteria>
1. vite.config.ts imports tailwindcss from @tailwindcss/vite
2. tailwindcss() is first in plugins array
3. resolve.alias contains all category-based aliases (@, @components, @lib, @utils, @hooks, @features, @layouts, @types, @constants)
4. components.json aliases are updated to match
5. npm run build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/01-design-system-foundation/01-02-SUMMARY.md` with:
- Vite configuration changes made
- Aliases configured
- Note that TypeScript configuration follows in 01-03
</output>
