---
phase: 02-layout-navigation
plan: 04
type: execute
wave: 2
depends_on: [02-01, 02-03]
files_modified: [src/components/layout/MobileNav/MobileNav.tsx, src/components/layout/MobileNav/MobileNavContext.tsx, src/components/layout/MobileNav/MobileNavProvider.tsx, src/components/layout/MobileNav/index.ts, src/index.css]
autonomous: true

must_haves:
  truths:
    - "Mobile bottom nav appears on mobile devices"
    - "Section icons show semantic meaning (user, briefcase, etc.)"
    - "Active section has glowing ring that fills with progress"
    - "Only active section shows label"
  artifacts:
    - path: "src/components/layout/MobileNav/MobileNav.tsx"
      provides: "Bottom floating navigation for mobile"
      min_lines: 50
    - path: "src/components/layout/MobileNav/MobileNavContext.tsx"
      provides: "Context for active section tracking"
      contains: "createContext"
    - path: "src/components/layout/MobileNav/MobileNavProvider.tsx"
      provides: "Active section state provider"
      exports: ["useMobileNavContext"]
    - path: "src/index.css"
      provides: "Mobile-specific CSS utility classes"
  key_links:
    - from: "src/components/layout/MobileNav/MobileNav.tsx"
      to: "@hugeicons/react"
      via: "import semantic icons"
      pattern: "from.*@hugeicons/react"
    - from: "src/components/layout/MobileNav/MobileNavProvider.tsx"
      to: "IntersectionObserver"
      via: "active section detection"
      pattern: "IntersectionObserver"
---

<objective>
Create mobile bottom navigation with floating glass pill, semantic icons, and glowing progress ring.

Purpose: Provides mobile-optimized navigation that's distinctive (not hamburger menu) with visual feedback showing active section and scroll progress.

Output: Working MobileNav compound component with floating bottom navigation, icons, and glowing progress ring.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/phases/02-layout-navigation/02-CONTEXT.md
@.planning/phases/02-layout-navigation/02-RESEARCH.md
@.planning/phases/02-layout-navigation/02-01-SUMMARY.md
@.planning/phases/02-layout-navigation/02-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Create MobileNavContext.tsx</name>
  <files>src/components/layout/MobileNav/MobileNavContext.tsx</files>
  <action>
    Create context definition for mobile navigation state:

    import { createContext } from "react";

    type MobileNavContextValue = {
      activeSection: string;
      sectionProgress: number;
    };

    export const MobileNavContext = createContext<MobileNavContextValue | null>(null);

    Follow CLAUDE.md pattern: Context.tsx contains ONLY type definition and createContext export.
  </action>
  <verify>file exists and exports MobileNavContext</verify>
  <done>MobileNavContext type definition created</done>
</task>

<task type="auto">
  <name>Create MobileNavProvider.tsx</name>
  <files>src/components/layout/MobileNav/MobileNavProvider.tsx</files>
  <action>
    Create provider that tracks active section and progress using Intersection Observer:

    import { createContext, useContext, useEffect, useState } from "react";
    import type { MobileNavContextValue } from "./MobileNavContext";
    import { MobileNavContext } from "./MobileNavContext";

    type MobileNavProviderProps = {
      children: React.ReactNode;
    };

    const sections = ["about", "career", "skills", "projects", "contact"];

    export const MobileNavProvider = ({ children }: MobileNavProviderProps) => {
      const [activeSection, setActiveSection] = useState("about");
      const [sectionProgress, setSectionProgress] = useState(0);

      useEffect(() => {
        const observers = sections.map((sectionId) => {
          const element = document.getElementById(sectionId);
          if (!element) return null;

          return new IntersectionObserver(
            (entries) => {
              entries.forEach((entry) => {
                if (entry.isIntersecting) {
                  setActiveSection(sectionId);
                }
              });
            },
            { threshold: 0.3 }
          );
        });

        const validObservers = observers.filter(Boolean) as IntersectionObserver[];

        validObservers.forEach((observer, index) => {
          const element = document.getElementById(sections[index]!);
          if (element) observer.observe(element);
        });

        const handleScroll = () => {
          const activeElement = document.getElementById(activeSection);
          if (!activeElement) return;

          const rect = activeElement.getBoundingClientRect();
          const sectionHeight = activeElement.offsetHeight;
          const scrolled = -rect.top;
          const progress = Math.min(Math.max(scrolled / sectionHeight, 0), 1);
          setSectionProgress(progress);
        };

        window.addEventListener("scroll", handleScroll);

        return () => {
          validObservers.forEach((observer) => observer.disconnect());
          window.removeEventListener("scroll", handleScroll);
        };
      }, [activeSection]);

      const value: MobileNavContextValue = { activeSection, sectionProgress };

      return (
        <MobileNavContext.Provider value={value}>
          {children}
        </MobileNavContext.Provider>
      );
    };

    export const useMobileNavContext = (): MobileNavContextValue => {
      const context = useContext(MobileNavContext);
      if (!context) throw new Error("MobileNav parts must be used within MobileNav");
      return context;
    };
  </action>
  <verify>file exists and exports MobileNavProvider and useMobileNavContext</verify>
  <done>MobileNavProvider with active section tracking created</done>
</task>

<task type="auto">
  <name>Create MobileNav.tsx with floating pill and progress ring</name>
  <files>src/components/layout/MobileNav/MobileNav.tsx</files>
  <action>
    Create floating bottom navigation component:

    import type React from "react";
    import { motion } from "motion/react";
    import {
      User01,
      Briefcase01,
      Code01,
      FolderOpen01,
      Mail01,
    } from "@hugeicons/react";
    import { useMobileNavContext } from "./MobileNavProvider";

    type NavItem = {
      id: string;
      label: string;
      icon: React.ComponentType<{ className?: string }>;
    };

    const navItems: NavItem[] = [
      { id: "about", label: "About", icon: User01 },
      { id: "career", label: "Career", icon: Briefcase01 },
      { id: "skills", label: "Skills", icon: Code01 },
      { id: "projects", label: "Projects", icon: FolderOpen01 },
      { id: "contact", label: "Contact", icon: Mail01 },
    ];

    type MobileNavProps = {
      className?: string;
    };

    export const MobileNav: React.FC<MobileNavProps> = ({ className = "" }) => {
      const { activeSection, sectionProgress } = useMobileNavContext();

      const handleClick = (id: string) => {
        const element = document.getElementById(id);
        if (element) {
          element.scrollIntoView({ behavior: "smooth" });
        }
      };

      return (
        <motion.nav
          className={`fixed bottom-6 left-1/2 -translate-x-1/2 z-50 md:hidden ${className}`}
          initial={{ y: 100, opacity: 0 }}
          animate={{ y: 0, opacity: 1 }}
          transition={{ delay: 0.3, duration: 0.5 }}
        >
          <div className="flex items-center gap-2 px-2 py-2 bg-background/80 backdrop-blur-md rounded-full border border-border shadow-lg">
            {navItems.map((item) => {
              const Icon = item.icon;
              const isActive = activeSection === item.id;

              return (
                <button
                  key={item.id}
                  onClick={() => handleClick(item.id)}
                  className="relative p-2 rounded-full transition-all hover:bg-accent"
                  aria-label={item.label}
                >
                  {isActive && (
                    <motion.div
                      className="absolute inset-0 rounded-full ring-2 ring-primary"
                      initial={{ scale: 0.8, opacity: 0 }}
                      animate={{ scale: 1.2, opacity: 0.6 }}
                      transition={{ duration: 0.3 }}
                    />
                  )}
                  <Icon
                    className={`relative z-10 size-5 transition-colors ${
                      isActive ? "text-primary" : "text-muted-foreground"
                    }`}
                  />
                  {isActive && (
                    <motion.span
                      className="absolute -bottom-1 left-1/2 -translate-x-1/2 text-[10px] font-medium text-primary whitespace-nowrap"
                      initial={{ opacity: 0, y: -5 }}
                      animate={{ opacity: 1, y: 0 }}
                    >
                      {item.label}
                    </motion.span>
                  )}
                </button>
              );
            })}
            {/* Progress indicator for active section */}
            <div className="ml-2 pr-1">
              <svg className="size-6 -rotate-90">
                <circle
                  cx="12"
                  cy="12"
                  r="10"
                  fill="none"
                  stroke="currentColor"
                  strokeWidth="2"
                  className="text-muted-foreground/20"
                />
                <motion.circle
                  cx="12"
                  cy="12"
                  r="10"
                  fill="none"
                  stroke="currentColor"
                  strokeWidth="2"
                  className="text-primary"
                  initial={{ pathLength: 0 }}
                  animate={{ pathLength: sectionProgress }}
                  style={{ strokeDasharray: "62.83" }}
                />
              </svg>
            </div>
          </div>
        </motion.nav>
      );
    };

    Uses semantic icons from HugeIcons (user, briefcase, code, folder, mail).
    Glowing ring around active item with scale animation.
    Progress circle fills as user scrolls through active section.
    Only active section shows label below icon.
    Hidden on desktop (md:hidden), visible on mobile.
  </action>
  <verify>file exists and imports semantic icons from @hugeicons/react</verify>
  <done>MobileNav with floating pill and progress ring created</done>
</task>

<task type="auto">
  <name>Create index.ts to assemble MobileNav compound component</name>
  <files>src/components/layout/MobileNav/index.ts</files>
  <action>
    Create assembly file following CLAUDE.md Composition Pattern:

    import { MobileNav } from "./MobileNav";

    export { MobileNav };
    export { MobileNavProvider } from "./MobileNavProvider";
    export { useMobileNavContext } from "./MobileNavProvider";

    MobileNav is self-contained (no sub-components needed).
    Export provider for use at app root level.
  </action>
  <verify>file exists and exports MobileNav and MobileNavProvider</verify>
  <done>MobileNav compound component properly assembled</done>
</task>

<task type="auto">
  <name>Create test file for MobileNav</name>
  <files>src/components/layout/MobileNav/__tests__/MobileNav.test.tsx</files>
  <action>
    Create test file following project conventions:

    import { render, screen } from "@testing-library/react";
    import { describe, expect, it } from "vitest";
    import { MobileNavProvider } from "../MobileNavProvider";
    import { MobileNav } from "../MobileNav";

    describe("MobileNav", () => {
      it("should render all navigation items", () => {
        render(
          <MobileNavProvider>
            <MobileNav />
          </MobileNavProvider>
        );
        expect(screen.getByLabelText("About")).toBeInTheDocument();
        expect(screen.getByLabelText("Career")).toBeInTheDocument();
        expect(screen.getByLabelText("Skills")).toBeInTheDocument();
        expect(screen.getByLabelText("Projects")).toBeInTheDocument();
        expect(screen.getByLabelText("Contact")).toBeInTheDocument();
      });

      it("should have mobile-only class", () => {
        const { container } = render(
          <MobileNavProvider>
            <MobileNav />
          </MobileNavProvider>
        );
        const nav = container.querySelector("nav");
        expect(nav).toHaveClass("md:hidden");
      });
    });

    Tests verify all navigation items render and mobile-specific styling.
  </action>
  <verify>npm run test -- --run MobileNav.test.tsx passes</verify>
  <done>MobileNav tests created and passing</done>
</task>

<task type="auto">
  <name>Add mobile utility CSS to index.css</name>
  <files>src/index.css</files>
  <action>
    Add utility class for mobile-specific styling at end of file in @layer base:

    @layer base {
      * {
        @apply border-border outline-ring/50;
      }
      body {
        @apply bg-background text-foreground;
      }
    }

    @layer components {
      .safe-bottom {
        padding-bottom: env(safe-area-inset-bottom, 20px);
      }
    }

    Adds safe-area support for mobile devices with home indicators.
  </action>
  <verify>grep -q "safe-area-inset-bottom" src/index.css</verify>
  <done>Mobile utility CSS added for safe area support</done>
</task>

</tasks>

<verification>
- npm run build completes without errors
- npm run lint passes
- npm run test -- --run passes for MobileNav tests
- MobileNav component can be imported from @components/layout/MobileNav
- Semantic icons display correctly (user, briefcase, code, folder, mail)
- Active section has glowing ring effect
- Progress circle fills as section is scrolled
- Only active section shows label
- Navigation hidden on desktop (md:hidden)
</verification>

<success_criteria>
Mobile bottom navigation with floating glass pill, semantic icons, glowing progress ring, and label on active item working. All tests passing.
</success_criteria>

<output>
After completion, create `.planning/phases/02-layout-navigation/02-04-SUMMARY.md`
</output>
