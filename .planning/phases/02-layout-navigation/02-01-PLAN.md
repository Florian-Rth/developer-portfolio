---
phase: 02-layout-navigation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [package.json, src/components/layout/Header/Header.tsx, src/components/layout/Header/HeaderContext.tsx, src/components/layout/Header/HeaderProvider.tsx, src/components/layout/Header/Logo.tsx, src/components/layout/Header/index.ts]
autonomous: true

must_haves:
  truths:
    - "Fixed header is visible at the top of the page"
    - "Logo with stroke animation appears on page load"
    - "Header transforms on scroll (shrinks + glass effect)"
    - "Header uses Composition Pattern with named exports"
  artifacts:
    - path: "src/components/layout/Header/Header.tsx"
      provides: "Main fixed header component with scroll state"
      min_lines: 30
    - path: "src/components/layout/Header/HeaderContext.tsx"
      provides: "Context definition for scroll state"
      contains: "createContext"
    - path: "src/components/layout/Header/HeaderProvider.tsx"
      provides: "Scroll state provider + useHeaderContext hook"
      exports: ["useHeaderContext"]
    - path: "src/components/layout/Header/Logo.tsx"
      provides: "SVG logo with Motion stroke animation"
      contains: "motion"
    - path: "src/components/layout/Header/index.ts"
      provides: "Header with attached sub-components"
      exports: ["Header"]
  key_links:
    - from: "src/components/layout/Header/Header.tsx"
      to: "src/components/layout/Header/HeaderProvider.tsx"
      via: "import HeaderProvider"
      pattern: "HeaderProvider"
    - from: "src/components/layout/Header/Logo.tsx"
      to: "motion/react"
      via: "import { motion }"
      pattern: "from.*motion.*react"
---

<objective>
Create fixed header component with scroll-triggered transformations and animated logo using Composition Pattern.

Purpose: Establishes the primary navigation container that stays fixed at top, transforms on scroll, and provides context for navigation children. The animated logo creates immediate visual interest and personal branding.

Output: Working Header compound component with scroll detection, glassmorphism effect, and animated logo ready for navigation links.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/phases/02-layout-navigation/02-CONTEXT.md
@.planning/phases/02-layout-navigation/02-RESEARCH.md
@.planning/phases/01-design-system-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Install Motion (Framer Motion) dependency</name>
  <files>package.json</files>
  <action>
    Install framer-motion package:
    npm install framer-motion@^12.29.0

    This is the approved exception to "minimal dependencies" rule for polished animations.
    Use the new import path: import { motion } from "motion/react" (NOT "framer-motion")
  </action>
  <verify>grep "framer-motion" package.json shows version ^12.29.0</verify>
  <done>framer-motion package installed and available in node_modules</done>
</task>

<task type="auto">
  <name>Create HeaderContext.tsx</name>
  <files>src/components/layout/Header/HeaderContext.tsx</files>
  <action>
    Create context definition for Header scroll state:

    import { createContext } from "react";

    type HeaderContextValue = {
      isScrolled: boolean;
    };

    export const HeaderContext = createContext<HeaderContextValue | null>(null);

    Follow CLAUDE.md pattern: Context.tsx contains ONLY type definition and createContext export.
    DO NOT include Provider or hook in this file.
  </action>
  <verify>file exists and exports HeaderContext with correct type</verify>
  <done>HeaderContext type definition created</done>
</task>

<task type="auto">
  <name>Create HeaderProvider.tsx</name>
  <files>src/components/layout/Header/HeaderProvider.tsx</files>
  <action>
    Create provider component that manages scroll state using useEffect + scroll event listener:

    import { createContext, useContext, useEffect, useState } from "react";
    import type { HeaderContextValue } from "./HeaderContext";
    import { HeaderContext } from "./HeaderContext";

    type HeaderProviderProps = {
      children: React.ReactNode;
    };

    export const HeaderProvider = ({ children }: HeaderProviderProps) => {
      const [isScrolled, setIsScrolled] = useState(false);

      useEffect(() => {
        const handleScroll = () => {
          setIsScrolled(window.scrollY > 20);
        };
        window.addEventListener("scroll", handleScroll);
        return () => window.removeEventListener("scroll", handleScroll);
      }, []);

      const value: HeaderContextValue = { isScrolled };

      return (
        <HeaderContext.Provider value={value}>
          {children}
        </HeaderContext.Provider>
      );
    };

    export const useHeaderContext = (): HeaderContextValue => {
      const context = useContext(HeaderContext);
      if (!context) throw new Error("Header parts must be used within Header");
      return context;
    };

    Scroll threshold of 20px triggers state change for glassmorphism effect.
  </action>
  <verify>file exists and exports HeaderProvider and useHeaderContext hook</verify>
  <done>HeaderProvider with scroll detection created</done>
</task>

<task type="auto">
  <name>Create Logo.tsx with stroke animation</name>
  <files>src/components/layout/Header/Logo.tsx</files>
  <action>
    Create animated SVG logo component using Motion:

    import { motion } from "motion/react";
    type React from "react";

    type LogoProps = {
      className?: string;
    };

    export const Logo: React.FC<LogoProps> = ({ className = "" }) => {
      return (
        <motion.svg
          className={className}
          viewBox="0 0 200 60"
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          transition={{ duration: 0.5 }}
        >
          <motion.text
            x="10"
            y="45"
            fontSize="36"
            fontWeight="bold"
            fill="currentColor"
            stroke="currentColor"
            strokeWidth="0.5"
            initial={{ pathLength: 0, opacity: 0 }}
            animate={{ pathLength: 1, opacity: 1 }}
            transition={{ duration: 1.5, ease: "easeInOut" }}
            style={{ fontFamily: "cursive, sans-serif" }}
          >
            Florian
          </motion.text>
        </motion.svg>
      );
    };

    The stroke animation uses Motion's pathLength property (works on text elements).
    This is a one-time animation on page load.
    Font falls back to cursive for hand-written feel.
  </action>
  <verify>file exists and imports from "motion/react" (NOT "framer-motion")</verify>
  <done>Logo component with Motion stroke animation created</done>
</task>

<task type="auto">
  <name>Create Header.tsx main component</name>
  <files>src/components/layout/Header/Header.tsx</files>
  <action>
    Create main fixed header component that transforms on scroll:

    import type React from "react";
    import { motion, useScroll, useTransform } from "motion/react";
    import { HeaderProvider } from "./HeaderProvider";

    type HeaderProps = {
      children: React.ReactNode;
    };

    export const Header: React.FC<HeaderProps> = ({ children }) => {
      const { scrollY } = useScroll();
      const height = useTransform(scrollY, [0, 100], [80, 60]);
      const background = useTransform(
        scrollY,
        [0, 100],
        ["oklch(0.985 0 0)", "oklch(0.985 0 0 / 0.8)"]
      );
      const backdropBlur = useTransform(scrollY, [0, 100], [0, 12]);

      return (
        <HeaderProvider>
          <motion.header
            style={{
              position: "fixed",
              top: 0,
              left: 0,
              right: 0,
              height,
              background,
              backdropFilter: backdropBlur.map((b) => `blur(${b}px)`),
              zIndex: 50,
            }}
            initial={{ y: -100 }}
            animate={{ y: 0 }}
            transition={{ duration: 0.5 }}
          >
            {children}
          </motion.header>
        </HeaderProvider>
      );
    };

    Uses Motion's useScroll and useTransform for smooth interpolated values.
    Header slides down from top on initial load.
    Glassmorphism effect activates as user scrolls.
  </action>
  <verify>file exists and has fixed positioning with Motion transforms</verify>
  <done>Header main component with scroll-based transforms created</done>
</task>

<task type="auto">
  <name>Create index.ts to assemble Header compound component</name>
  <files>src/components/layout/Header/index.ts</files>
  <action>
    Create assembly file following CLAUDE.md Composition Pattern:

    import { Header } from "./Header";
    import { Logo } from "./Logo";

    Header.Logo = Logo;

    export { Header };
    export { useHeaderContext } from "./HeaderProvider";

    This enables usage: <Header><Header.Logo /></Header>
    Only main component (Header) is exported. Sub-components attached as properties.
  </action>
  <verify>file exists and exports Header with Logo attached as property</verify>
  <done>Header compound component properly assembled and exported</done>
</task>

<task type="auto">
  <name>Create test file for Header</name>
  <files>src/components/layout/Header/__tests__/Header.test.tsx</files>
  <action>
    Create test file following project conventions:

    import { render, screen } from "@testing-library/react";
    import { describe, expect, it } from "vitest";
    import { Header } from "../Header";

    describe("Header", () => {
      it("should render fixed header", () => {
        render(
          <Header>
            <Header.Logo />
          </Header>
        );
        const header = screen.getByRole("banner");
        expect(header).toBeInTheDocument();
      });

      it("should render logo", () => {
        render(<Header.Logo />);
        expect(screen.getByText("Florian")).toBeInTheDocument();
      });
    });

    Tests verify rendering and composition pattern.
  </action>
  <verify>npm run test -- --run Header.test.tsx passes</verify>
  <done>Header tests created and passing</done>
</task>

</tasks>

<verification>
- npm run build completes without errors
- npm run lint passes
- npm run test -- --run passes for Header tests
- Header component can be imported from @components/layout/Header
- <Header><Header.Logo /></Header> renders without errors
- Motion animations import from "motion/react" not "framer-motion"
</verification>

<success_criteria>
Fixed header component with scroll-triggered transformations working. Logo animates on load. Composition pattern correctly applied. All tests passing.
</success_criteria>

<output>
After completion, create `.planning/phases/02-layout-navigation/02-01-SUMMARY.md`
</output>
