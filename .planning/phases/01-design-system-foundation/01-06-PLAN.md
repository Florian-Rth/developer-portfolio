---
phase: 01-design-system-foundation
plan: 06
type: execute
wave: 4
depends_on: [01-01, 01-02, 01-03, 01-04]
files_modified: [src/components/ui/button.tsx, package.json]
autonomous: true

must_haves:
  truths:
    - "shadcn CLI successfully installs a component (Button)"
    - "Button component is installed in src/components/ui/"
    - "Button component uses Base UI primitives (@base-ui/react)"
    - "Button component renders in the browser without errors"
    - "Button component responds to theme changes (light/dark mode)"
    - "Component installation validates the entire design system infrastructure"
  artifacts:
    - path: "src/components/ui/button.tsx"
      provides: "Button component from shadcn/Base UI"
      contains: ["Button", "className", "variant"]
      imports: ["@base-ui-components/react/button"]
    - path: "package.json"
      provides: "Updated dependencies including class-variance-authority"
      contains: ["class-variance-authority"]
  key_links:
    - from: "src/components/ui/button.tsx"
      to: "@base-ui/react"
      via: "Import of Base UI button primitive"
      pattern: "from.*@base-ui"
    - from: "src/components/ui/button.tsx"
      to: "src/lib/utils.ts"
      via: "cn utility for className merging"
      pattern: "from.*@lib/utils.*cn"
    - from: "src/App.tsx"
      to: "src/components/ui/button.tsx"
      via: "Test import and render"
      pattern: "from.*@components/ui/button"
---

<objective>
Verify the shadcn CLI infrastructure works by installing a primitive component (Button) and confirming it renders correctly with theme support.

Purpose: This plan addresses DS-06 requirement by validating that the entire design system foundation (CLI configuration, Tailwind CSS, path aliases, design tokens, theme provider) actually enables component installation and usage. Installing Button proves the infrastructure works before proceeding to build actual UI components in later phases.

Output: Installed Button component in src/components/ui/, class-variance-authority dependency, and a working test of Button rendering in App.tsx with theme switching.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-design-system-foundation/01-CONTEXT.md
@.planning/phases/01-design-system-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Install Button component via shadcn CLI</name>
  <files>src/components/ui/button.tsx, package.json</files>
  <action>
    Run `npx shadcn@latest add button` to install the Button component.

    This command will:
    1. Fetch the Button component from the shadcn registry (Base UI version)
    2. Install the component to src/components/ui/button.tsx
    3. Install dependencies like class-variance-authority (cva) if needed
    4. Use the path aliases configured in components.json

    Accept all defaults. The CLI should use:
    - Base UI primitives (configured in plan 01-01)
    - Category-based aliases (@components, configured in plan 01-02)
    - Nova style with Zinc color (configured in plan 01-01)

    If the command fails:
    - Verify components.json exists (from plan 01-01)
    - Verify Tailwind is configured (from plan 01-02)
    - Check that globals.css exists (from plan 01-04)
  </action>
  <verify>ls src/components/ui/button.tsx && grep -E "class-variance-authority" package.json</verify>
  <done>Button component installed in src/components/ui/ and class-variance-authority added to dependencies</done>
</task>

<task type="auto">
  <name>Verify Button uses Base UI primitives</name>
  <files>src/components/ui/button.tsx</files>
  <action>
    Read src/components/ui/button.tsx and verify:
    1. Imports from @base-ui-components/react/button or @base-ui/react/button
    2. Uses the cn utility from @lib/utils
    3. Uses class-variance-authority (cva) for variants
    4. Exports a named Button export (not default)

    Example expected pattern:
    ```typescript
    import * as React from "react";
    import * as ButtonPrimitive from "@base-ui-components/react/button";
    import { cva, type VariantProps } from "class-variance-authority";
    import { cn } from "@lib/utils";

    const buttonVariants = cva(...);

    export interface ButtonProps extends VariantProps<typeof buttonVariants> {
      // ...
    }

    export const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(...);
    ```

    If Base UI imports are not present, the CLI may have installed Radix version instead. In that case, note the discrepancy in the summary but continue — the infrastructure is working, just with a different primitive library.
  </action>
  <verify>grep -E "@base-ui|@base-ui-components" src/components/ui/button.tsx || echo "WARNING: Button may use Radix UI instead of Base UI"</verify>
  <done>Button component uses Base UI primitives (or note if Radix was installed instead)</done>
</task>

<task type="auto">
  <name>Add Button test to App.tsx</name>
  <files>src/App.tsx</files>
  <action>
    Add test Buttons to App.tsx to verify the component renders and responds to theme changes.

    First, import the Button:
    ```typescript
    import { Button } from "@components/ui/button";
    ```

    Then, add test buttons in the JSX. Replace or augment existing content with:
    ```tsx
    <div className="min-h-screen bg-background text-foreground p-8">
      <div className="max-w-md mx-auto space-y-4">
        <h1 className="text-2xl font-bold">Design System Test</h1>

        <div className="flex gap-2 flex-wrap">
          <Button variant="default">Default Button</Button>
          <Button variant="secondary">Secondary</Button>
          <Button variant="destructive">Destructive</Button>
          <Button variant="outline">Outline</Button>
          <Button variant="ghost">Ghost</Button>
          <Button variant="link">Link</Button>
        </div>

        <div className="flex gap-2">
          <Button size="default">Default Size</Button>
          <Button size="sm">Small</Button>
          <Button size="lg">Large</Button>
          <Button size="icon">Icon</Button>
        </div>

        <p className="text-muted-foreground">
          If you see styled buttons above with proper colors, the design system is working!
          Toggle theme to verify dark mode.
        </p>
      </div>
    </div>
    ```

    This test will verify:
    1. Button component renders without errors
    2. All variants apply correct styles
    3. Design tokens (bg-background, text-foreground, etc.) work
    4. Theme switching changes button appearance
  </action>
  <verify>grep -E "Button.*variant|from.*@components/ui/button" src/App.tsx</verify>
  <done>App.tsx imports and renders Button component with multiple variants</done>
</task>

<task type="auto">
  <name>Verify Button renders with theme support</name>
  <files>src/App.tsx, src/components/ui/button.tsx</files>
  <action>
    Run the dev server and verify Button renders correctly:

    1. Start dev server: `npm run dev`
    2. Open browser to the URL shown (usually http://localhost:5173)
    3. Verify buttons are visible with proper styling
    4. Use the theme toggle (from plan 01-05) to switch between light/dark
    5. Verify button colors change appropriately for each theme

    Check for:
    - Default button has primary color
    - Secondary button has secondary color
    - Outline button has border with transparent background
    - All buttons respond to dark mode toggle
    - Hover states work (mouse over buttons)

    If buttons appear unstyled:
    - Check that globals.css is imported in main.tsx
    - Verify Tailwind plugin is first in vite.config.ts
    - Check browser console for CSS errors

    If theme switching doesn't affect buttons:
    - Verify ThemeProvider wraps App in main.tsx
    - Check that .dark class is applied to html element
  </action>
  <verify>
    # Check that dev server can start and build succeeds
    npm run build
  </verify>
  <done>Buttons render with proper styling and respond to theme changes (light/dark mode)</done>
</task>

</tasks>

<verification>
After all tasks complete, verify the component installation infrastructure:

1. Run `npm run build` - should succeed with Button component
2. Run `npm run lint` - should pass
3. Check src/components/ui/ directory contains button.tsx
4. Check package.json contains class-variance-authority
5. Visually verify in browser:
   - All button variants render correctly
   - Theme toggle changes button appearance
   - No console errors

This verification confirms DS-06 is met: "Primitive components from basecn (Button, Card, Input) installed and working" — at minimum, Button is installed and working.
</verification>

<success_criteria>
1. `npx shadcn add button` completed without errors
2. src/components/ui/button.tsx exists and imports from @base-ui-components/react
3. class-variance-authority is in package.json dependencies
4. Button renders in App.tsx with all variants (default, secondary, destructive, outline, ghost, link)
5. Button styling responds to theme changes (light/dark mode)
6. npm run build succeeds
7. DS-06 requirement is satisfied: at least one primitive component (Button) is installed and working
</success_criteria>

<output>
After completion, create `.planning/phases/01-design-system-foundation/01-06-SUMMARY.md` with:
- Component installation result (Button installed successfully)
- Confirmation that Base UI primitives are being used
- Theme switching verification results
- Design system foundation is complete and validated
- Ready for Phase 2 (Layout & Navigation)

IMPORTANT NOTE: DS-07 (Composition Pattern with named exports and property attachment) is DEFERRED to later phases. This requirement cannot be met in Phase 1 because:
1. shadcn components use their own patterns (default exports in many cases)
2. The project's Composition Pattern is for custom-built components
3. Phase 1 only installs infrastructure and verifies it works with one primitive
4. Actual UI components using project's Composition Pattern will be built in Phase 2+
</output>
