---
phase: 02-layout-navigation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [package.json, src/components/layout/Header/HeaderContext.tsx, src/components/layout/Header/HeaderProvider.tsx]
autonomous: true

must_haves:
  truths:
    - "Motion (Framer Motion) is installed and importable"
    - "HeaderContext provides type definition for scroll state"
    - "HeaderProvider provides scroll state with useHeaderContext hook"
  artifacts:
    - path: "package.json"
      provides: "Motion dependency"
      contains: "framer-motion"
    - path: "src/components/layout/Header/HeaderContext.tsx"
      provides: "Context definition for scroll state"
      contains: "createContext"
    - path: "src/components/layout/Header/HeaderProvider.tsx"
      provides: "Scroll state provider + useHeaderContext hook"
      exports: ["useHeaderContext"]
  key_links:
    - from: "src/components/layout/Header/HeaderProvider.tsx"
      to: "src/components/layout/Header/HeaderContext.tsx"
      via: "import HeaderContext"
      pattern: "HeaderContext"
---

<objective>
Install Motion dependency and create Header context foundation (Context + Provider).

Purpose: Establishes the foundation for Header state management with scroll detection. Motion library enables polished scroll-based animations. The Context/Provider split follows CLAUDE.md Composition Pattern.

Output: Motion installed, HeaderContext type defined, HeaderProvider with scroll detection ready.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/phases/02-layout-navigation/02-CONTEXT.md
@.planning/phases/02-layout-navigation/02-RESEARCH.md
@.planning/phases/01-design-system-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Install Motion (Framer Motion) dependency</name>
  <files>package.json</files>
  <action>
    Install framer-motion package:
    npm install framer-motion@^12.29.0

    This is the approved exception to "minimal dependencies" rule for polished animations.
    Use the new import path: import { motion } from "motion/react" (NOT "framer-motion")
  </action>
  <verify>grep "framer-motion" package.json shows version ^12.29.0</verify>
  <done>framer-motion package installed and available in node_modules</done>
</task>

<task type="auto">
  <name>Create HeaderContext.tsx</name>
  <files>src/components/layout/Header/HeaderContext.tsx</files>
  <action>
    Create context definition for Header scroll state:

    import { createContext } from "react";

    type HeaderContextValue = {
      isScrolled: boolean;
    };

    export const HeaderContext = createContext<HeaderContextValue | null>(null);

    Follow CLAUDE.md pattern: Context.tsx contains ONLY type definition and createContext export.
    DO NOT include Provider or hook in this file.
  </action>
  <verify>file exists and exports HeaderContext with correct type</verify>
  <done>HeaderContext type definition created</done>
</task>

<task type="auto">
  <name>Create HeaderProvider.tsx</name>
  <files>src/components/layout/Header/HeaderProvider.tsx</files>
  <action>
    Create provider component that manages scroll state using useEffect + scroll event listener:

    import { createContext, useContext, useEffect, useState } from "react";
    import type { HeaderContextValue } from "./HeaderContext";
    import { HeaderContext } from "./HeaderContext";

    type HeaderProviderProps = {
      children: React.ReactNode;
    };

    export const HeaderProvider = ({ children }: HeaderProviderProps) => {
      const [isScrolled, setIsScrolled] = useState(false);

      useEffect(() => {
        const handleScroll = () => {
          setIsScrolled(window.scrollY > 20);
        };
        window.addEventListener("scroll", handleScroll);
        return () => window.removeEventListener("scroll", handleScroll);
      }, []);

      const value: HeaderContextValue = { isScrolled };

      return (
        <HeaderContext.Provider value={value}>
          {children}
        </HeaderContext.Provider>
      );
    };

    export const useHeaderContext = (): HeaderContextValue => {
      const context = useContext(HeaderContext);
      if (!context) throw new Error("Header parts must be used within Header");
      return context;
    };

    Scroll threshold of 20px triggers state change for glassmorphism effect.
  </action>
  <verify>file exists and exports HeaderProvider and useHeaderContext hook</verify>
  <done>HeaderProvider with scroll detection created</done>
</task>

</tasks>

<verification>
- npm run build completes without errors
- npm run lint passes
- Motion package is importable from "motion/react"
- HeaderContext and HeaderProvider files exist with correct exports
</verification>

<success_criteria>
Motion dependency installed. Header context foundation (Context + Provider + hook) created and ready for Header component assembly.
</success_criteria>

<output>
After completion, create `.planning/phases/02-layout-navigation/02-01-SUMMARY.md`
</output>
